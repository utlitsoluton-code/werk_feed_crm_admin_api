import{j as e,g as W,h,a4 as ae,T as P,P as a,r as d,ad as le,a2 as R,ae as L,af as ie,M as N,I as f,D as oe,m as ce,n as de,K as O,b as j,o as ue,B as T,f as he,i as xe,ag as me,ah as pe,ai as U,C as ge,S as je,a as M,c as fe,d as be,e as Ce,k as ye,l as ve,aj as Se,p as we,q as V,W as Te}from"./index-bc27530a.js";import{C as _}from"./Checkbox-233e17ed.js";import{I as Pe}from"./InputAdornment-7a90a895.js";function $({query:s}){return e.jsx(W,{children:e.jsx(h,{align:"center",colSpan:6,sx:{py:3},children:e.jsxs(ae,{sx:{textAlign:"center"},children:[e.jsx(P,{variant:"h6",paragraph:!0,children:"Not found"}),e.jsxs(P,{variant:"body2",children:["No results found for Â ",e.jsxs("strong",{children:['"',s,'"']}),".",e.jsx("br",{})," Try checking for typos or using complete words."]})]})})})}$.propTypes={query:a.string};function B({selected:s,name:n,client_code:t,email:o,phone:i,address:u,handleClick:m,suctomerId:b}){const[l,v]=d.useState(null),[x,I]=d.useState(!1),[p,k]=d.useState({}),A=le(),S=()=>{v(null)},D=()=>{k({name:n,client_code:t,email:o,phone:i,address:u}),I(!0)},E=()=>{A(`/credit/?suctomerId=${b}`)},w=()=>{I(!1)};return e.jsxs(e.Fragment,{children:[e.jsxs(W,{hover:!0,tabIndex:-1,role:"checkbox",selected:s,children:[e.jsx(h,{padding:"checkbox",children:e.jsx(_,{disableRipple:!0,checked:s,onChange:m})}),e.jsx(h,{children:t}),e.jsx(h,{children:n}),e.jsx(h,{children:i}),e.jsx(h,{children:o}),e.jsx(h,{children:u}),e.jsx(h,{children:e.jsx(R,{onClick:D,children:e.jsx(L,{})})}),e.jsx(h,{children:e.jsx(R,{onClick:E,children:e.jsx(L,{})})})]}),e.jsxs(ie,{open:!!l,anchorEl:l,onClose:S,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{sx:{width:140}},children:[e.jsxs(N,{onClick:S,children:[e.jsx(f,{icon:"eva:edit-fill",sx:{mr:2}}),"Edit"]}),e.jsxs(N,{onClick:S,sx:{color:"error.main"},children:[e.jsx(f,{icon:"eva:trash-2-outline",sx:{mr:2}}),"Delete"]})]}),e.jsxs(oe,{open:x,onClose:w,maxWidth:"md",fullWidth:!0,children:[e.jsx(ce,{children:"Customer Details"}),e.jsx(de,{children:p&&e.jsxs(O,{sx:{display:"flex",flexDirection:"column",gap:2,p:2},children:[e.jsx(j,{label:"Name",value:p.name||"",fullWidth:!0,InputProps:{readOnly:!0}}),e.jsx(j,{label:"Client Code",value:p.client_code||"",fullWidth:!0,InputProps:{readOnly:!0}}),e.jsx(j,{label:"Phone",value:p.phone||"",fullWidth:!0,InputProps:{readOnly:!0}}),e.jsx(j,{label:"Email",value:p.email||"",fullWidth:!0,InputProps:{readOnly:!0}}),e.jsx(j,{label:"Address",value:p.address||"",fullWidth:!0,InputProps:{readOnly:!0}})]})}),e.jsxs(ue,{sx:{justifyContent:"center"},children:[e.jsx(T,{onClick:()=>A(`/credit/?suctomerId=${b}`),color:"primary",children:"View Customer Credits"}),e.jsx(T,{onClick:w,color:"primary",children:"Close"})]})]})]})}B.propTypes={name:a.string.isRequired,client_code:a.string.isRequired,email:a.string.isRequired,address:a.string.isRequired,phone:a.string.isRequired,selected:a.bool.isRequired,handleClick:a.func.isRequired,suctomerId:a.string.isRequired};const Ie={border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"};function K(s,n,t){return s[t]===null?1:n[t]===null||n[t]<s[t]?-1:n[t]>s[t]?1:0}function ke(s,n){return s==="desc"?(t,o)=>K(t,o,n):(t,o)=>-K(t,o,n)}function Ae({inputData:s,comparator:n,filterName:t}){const o=s.map((i,u)=>[i,u]);return o.sort((i,u)=>{const m=n(i[0],u[0]);return m!==0?m:i[1]-u[1]}),s=o.map(i=>i[0]),t&&(s=s.filter(i=>i.name.toLowerCase().indexOf(t.toLowerCase())!==-1)),s}function z({order:s,orderBy:n,rowCount:t,headLabel:o,numSelected:i,onRequestSort:u,onSelectAllClick:m}){const b=l=>v=>{u(v,l)};return e.jsx(he,{children:e.jsxs(W,{children:[e.jsx(h,{padding:"checkbox",children:e.jsx(_,{indeterminate:i>0&&i<t,checked:t>0&&i===t,onChange:m})}),o.map(l=>e.jsx(h,{align:l.align||"left",sortDirection:n===l.id?s:!1,sx:{width:l.width,minWidth:l.minWidth},children:e.jsxs(xe,{hideSortIcon:!0,active:n===l.id,direction:n===l.id?s:"asc",onClick:b(l.id),children:[l.label,n===l.id?e.jsx(O,{sx:{...Ie},children:s==="desc"?"sorted descending":"sorted ascending"}):null]})},l.id))]})})}z.propTypes={order:a.oneOf(["asc","desc"]),orderBy:a.string,rowCount:a.number,headLabel:a.array,numSelected:a.number,onRequestSort:a.func,onSelectAllClick:a.func};function H({emptyRows:s,height:n}){return s?e.jsx(W,{sx:{...n&&{height:n*s}},children:e.jsx(h,{colSpan:9})}):null}H.propTypes={emptyRows:a.number,height:a.number};function Y({numSelected:s,filterName:n,onFilterName:t}){return e.jsxs(me,{sx:{height:96,display:"flex",justifyContent:"space-between",p:o=>o.spacing(0,1,0,3),...s>0&&{color:"primary.main",bgcolor:"primary.lighter"}},children:[s>0?e.jsxs(P,{component:"div",variant:"subtitle1",children:[s," selected"]}):e.jsx(pe,{value:n,onChange:t,placeholder:"Search user...",startAdornment:e.jsx(Pe,{position:"start",children:e.jsx(f,{icon:"eva:search-fill",sx:{color:"text.disabled",width:20,height:20}})})}),s>0?e.jsx(U,{title:"Delete",children:e.jsx(R,{children:e.jsx(f,{icon:"eva:trash-2-fill"})})}):e.jsx(U,{title:"Filter list",children:e.jsx(R,{children:e.jsx(f,{icon:"ic:round-filter-list"})})})]})}Y.propTypes={numSelected:a.number,filterName:a.string,onFilterName:a.func};function Ee(){const[s,n]=d.useState(0),[t,o]=d.useState("asc"),[i,u]=d.useState([]),[m,b]=d.useState("name"),[l,v]=d.useState(""),[x,I]=d.useState(5),[p,k]=d.useState([]),[A,S]=d.useState(0),[D,E]=d.useState(!1),[w,G]=d.useState({firstName:"",surname:"",phone:"",email:"",address:"",userType:"RECEIVABLE"});d.useEffect(()=>{(async()=>{try{const c=localStorage.getItem("authKey"),g=await V.get("http://65.1.233.188:9000/api/v1/admin/user/get-all-customer",{headers:{authKey:`${c}`}}),{data:y}=g.data;k(y),S(g.data.totalLength)}catch(c){console.error("There was an error fetching the users!",c)}})()},[s,x]);const J=()=>{E(!0)},q=()=>{E(!1)},Q=(r,c)=>{c!==""&&(o(m===c&&t==="asc"?"desc":"asc"),b(c))},X=r=>{if(r.target.checked){const c=p.map(g=>g.firstName);u(c);return}u([])},Z=(r,c)=>{n(c)},ee=r=>{n(0),I(parseInt(r.target.value,10))},se=r=>{n(0),v(r.target.value)},F=Ae({inputData:p,comparator:ke(t,m),filterName:l}),te=!F.length&&!!l,C=r=>{const{name:c,value:g}=r.target;G(y=>({...y,[c]:g}))},ne=async r=>{r.preventDefault();const c=localStorage.getItem("authKey");try{const y=(await V.post("http://65.1.233.188:9000/api/v1/admin/user/create-customer",w,{headers:{authKey:`${c}`}})).data.data;console.log({newUser:y}),k(re=>[...re,y]),q()}catch(g){console.error("There was an error creating the user!",g),alert("Error creating user")}};return d.useState(null),e.jsxs(ge,{children:[e.jsxs(je,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:5,mb:5,children:[e.jsx(P,{variant:"h4",children:"Customer"}),e.jsxs(M,{children:[e.jsx(T,{variant:"contained",color:"inherit",startIcon:e.jsx(f,{icon:"eva:plus-fill"}),onClick:J,children:"Add New Customer"}),e.jsx(T,{variant:"contained",color:"primary",sx:{marginLeft:5},startIcon:e.jsx(f,{icon:"eva:download-fill"}),onClick:()=>alert("Coming Soon !"),children:"Download Data"})]})]}),e.jsxs(M,{children:[e.jsx(Y,{numSelected:i.length,filterName:l,onFilterName:se}),e.jsx(fe,{children:e.jsx(be,{sx:{overflow:"unset",p:2},children:e.jsxs(Ce,{sx:{minWidth:800},children:[e.jsx(z,{order:t,orderBy:m,rowCount:p.length,numSelected:i.length,onRequestSort:Q,onSelectAllClick:X,headLabel:[{id:"client_code",label:"Client Code"},{id:"name",label:"Name",align:"center"},{id:"phone",label:"Phone"},{id:"email",label:"Email"},{id:"address",label:"Address"},{id:"View Details",label:"View Details"},{id:"View Credit",label:"View Credit"}]}),e.jsxs(ye,{children:[F.slice(s*x,s*x+x).map(r=>e.jsx(B,{client_code:r.client_code,name:`${r.firstName} ${r.surname}`,phone:r.phone,email:r.email,address:r.address,suctomerId:r._id},r._id)),e.jsx(H,{height:x-F.slice(s*x,s*x+x).length}),te&&e.jsx($,{colSpan:6})]})]})})}),e.jsx(ve,{rowsPerPageOptions:[5,10,25],component:"div",count:A,rowsPerPage:x,page:s,onPageChange:Z,onRowsPerPageChange:ee})]}),e.jsx(Se,{open:D,onClose:q,children:e.jsxs(O,{sx:{p:3,width:400,mx:"auto",mt:10,mb:10,bgcolor:"background.paper"},children:[e.jsx(P,{variant:"h6",gutterBottom:!0,children:"Add New Customer"}),e.jsxs("form",{onSubmit:ne,children:[e.jsx(j,{label:"First Name",name:"firstName",fullWidth:!0,margin:"normal",onChange:C}),e.jsx(j,{label:"Surname",name:"surname",fullWidth:!0,margin:"normal",onChange:C}),e.jsx(j,{label:"Phone",name:"phone",fullWidth:!0,margin:"normal",onChange:C}),e.jsx(j,{label:"Email",name:"email",fullWidth:!0,margin:"normal",onChange:C}),e.jsx(j,{label:"Address",name:"address",fullWidth:!0,margin:"normal",onChange:C}),e.jsxs(we,{name:"userType",value:w.userType,onChange:C,fullWidth:!0,margin:"normal",children:[e.jsx(N,{value:"RECEIVABLE",children:"RECEIVABLE"}),e.jsx(N,{value:"PAYABLE",children:"PAYABLE"})]}),e.jsx(O,{sx:{display:"flex",justifyContent:"center",mt:2},children:e.jsx(T,{type:"submit",variant:"contained",color:"primary",children:"Add Customer"})})]})]})})]})}function We(){return e.jsxs(e.Fragment,{children:[e.jsx(Te,{children:e.jsx("title",{children:" User  "})}),e.jsx(Ee,{})]})}export{We as default};
