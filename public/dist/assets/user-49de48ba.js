import{j as e,g as P,h as g,a5 as le,T,P as l,r as x,a3 as R,I as b,ae as oe,M as f,f as ce,i as de,K as _,af as he,ag as ue,ad as me,ah as O,C as xe,a as U,S as q,b as w,B as N,c as pe,d as ge,e as je,k as fe,l as be,ai as ve,o as S,L as W,W as Ce}from"./index-ec1580f4.js";import{C as K,L as ye}from"./label-0e43cf7c.js";function B({query:n}){return e.jsx(P,{children:e.jsx(g,{align:"center",colSpan:6,sx:{py:3},children:e.jsxs(le,{sx:{textAlign:"center"},children:[e.jsx(T,{variant:"h6",paragraph:!0,children:"Not found"}),e.jsxs(T,{variant:"body2",children:["No results found for Â ",e.jsxs("strong",{children:['"',n,'"']}),".",e.jsx("br",{})," Try checking for typos or using complete words."]})]})})})}B.propTypes={query:l.string};function D({selected:n,name:a,date:s,type:h,amount:r,contact:m,handleClick:j}){const[v,o]=x.useState(null),y=p=>{o(p.currentTarget)},u=()=>{o(null)},E=p=>p==="credit"?"success":p==="pay"?"error":"default";return e.jsxs(e.Fragment,{children:[e.jsxs(P,{hover:!0,tabIndex:-1,role:"checkbox",selected:n,children:[e.jsx(g,{padding:"checkbox",children:e.jsx(K,{disableRipple:!0,checked:n,onChange:j})}),e.jsx(g,{children:s}),e.jsx(g,{children:e.jsx(ye,{color:E(h),children:h})}),e.jsx(g,{children:r}),e.jsx(g,{children:a}),e.jsx(g,{children:m}),e.jsx(g,{align:"right",children:e.jsx(R,{onClick:y,children:e.jsx(b,{icon:"eva:more-vertical-fill"})})})]}),e.jsxs(oe,{open:!!v,anchorEl:v,onClose:u,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{sx:{width:140}},children:[e.jsxs(f,{onClick:u,children:[e.jsx(b,{icon:"eva:edit-fill",sx:{mr:2}}),"Edit"]}),e.jsxs(f,{onClick:u,sx:{color:"error.main"},children:[e.jsx(b,{icon:"eva:trash-2-outline",sx:{mr:2}}),"Delete"]})]})]})}D.propTypes={name:l.string.isRequired,date:l.string.isRequired,type:l.string.isRequired,amount:l.string.isRequired,contact:l.string.isRequired,selected:l.bool.isRequired,handleClick:l.func.isRequired};const Se={border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"};function M(n,a,s){return n[s]===null?1:a[s]===null||a[s]<n[s]?-1:a[s]>n[s]?1:0}function Te(n,a){return n==="desc"?(s,h)=>M(s,h,a):(s,h)=>-M(s,h,a)}function we({inputData:n,comparator:a,filterName:s}){const h=n.map((r,m)=>[r,m]);return h.sort((r,m)=>{const j=a(r[0],m[0]);return j!==0?j:r[1]-m[1]}),n=h.map(r=>r[0]),s&&(n=n.filter(r=>r.name.toLowerCase().indexOf(s.toLowerCase())!==-1)),n}function $({order:n,orderBy:a,rowCount:s,headLabel:h,numSelected:r,onRequestSort:m,onSelectAllClick:j}){const v=o=>y=>{m(y,o)};return e.jsx(ce,{children:e.jsxs(P,{children:[e.jsx(g,{padding:"checkbox",children:e.jsx(K,{indeterminate:r>0&&r<s,checked:s>0&&r===s,onChange:j})}),h.map(o=>e.jsx(g,{align:o.align||"left",sortDirection:a===o.id?n:!1,sx:{width:o.width,minWidth:o.minWidth},children:e.jsxs(de,{hideSortIcon:!0,active:a===o.id,direction:a===o.id?n:"asc",onClick:v(o.id),children:[o.label,a===o.id?e.jsx(_,{sx:{...Se},children:n==="desc"?"sorted descending":"sorted ascending"}):null]})},o.id))]})})}$.propTypes={order:l.oneOf(["asc","desc"]),orderBy:l.string,rowCount:l.number,headLabel:l.array,numSelected:l.number,onRequestSort:l.func,onSelectAllClick:l.func};function z({emptyRows:n,height:a}){return n?e.jsx(P,{sx:{...a&&{height:a*n}},children:e.jsx(g,{colSpan:9})}):null}z.propTypes={emptyRows:l.number,height:l.number};function H({numSelected:n,filterName:a,onFilterName:s}){return e.jsxs(he,{sx:{height:96,display:"flex",justifyContent:"space-between",p:h=>h.spacing(0,1,0,3),...n>0&&{color:"primary.main",bgcolor:"primary.lighter"}},children:[n>0?e.jsxs(T,{component:"div",variant:"subtitle1",children:[n," selected"]}):e.jsx(ue,{value:a,onChange:s,placeholder:"Search user...",startAdornment:e.jsx(me,{position:"start",children:e.jsx(b,{icon:"eva:search-fill",sx:{color:"text.disabled",width:20,height:20}})})}),n>0?e.jsx(O,{title:"Delete",children:e.jsx(R,{children:e.jsx(b,{icon:"eva:trash-2-fill"})})}):e.jsx(O,{title:"Filter list",children:e.jsx(R,{children:e.jsx(b,{icon:"ic:round-filter-list"})})})]})}H.propTypes={numSelected:l.number,filterName:l.string,onFilterName:l.func};function Pe(){const[n,a]=x.useState(0),[s,h]=x.useState("asc"),[r,m]=x.useState([]),[j,v]=x.useState("name"),[o,y]=x.useState(""),[u,E]=x.useState(5),[p,A]=x.useState([]),[V,Y]=x.useState(0),[G,I]=x.useState(!1),[F,J]=x.useState({firstName:"",surname:"",phone:"",email:"",address:"",userType:"RECEIVABLE"});x.useEffect(()=>{(async()=>{try{const i=localStorage.getItem("authKey"),c=await W.get("http://65.1.233.188:9000/api/v1/admin/user/get-all-customer",{headers:{authKey:`${i}`}}),{data:d}=c.data;A(d),Y(c.data.totalLength)}catch(i){console.error("There was an error fetching the users!",i)}})()},[n,u]);const Q=()=>{I(!0)},L=()=>{I(!1)},X=(t,i)=>{i!==""&&(h(j===i&&s==="asc"?"desc":"asc"),v(i))},Z=t=>{if(t.target.checked){const i=p.map(c=>c.firstName);m(i);return}m([])},ee=(t,i)=>{const c=r.indexOf(i);let d=[];c===-1?d=d.concat(r,i):c===0?d=d.concat(r.slice(1)):c===r.length-1?d=d.concat(r.slice(0,-1)):c>0&&(d=d.concat(r.slice(0,c),r.slice(c+1))),m(d)},ne=(t,i)=>{a(i)},te=t=>{a(0),E(parseInt(t.target.value,10))},se=t=>{a(0),y(t.target.value)},k=we({inputData:p,comparator:Te(s,j),filterName:o}),re=!k.length&&!!o,C=t=>{const{name:i,value:c}=t.target;J(d=>({...d,[i]:c}))},ae=async t=>{t.preventDefault();const i=localStorage.getItem("authKey");try{const c=await W.post("http://65.1.233.188:9000/api/v1/admin/user/create-customer",F,{headers:{authKey:`${i}`}}),d=c.data.data;console.log(d),alert(c.data.meta.message),A(ie=>[...ie,d]),L()}catch(c){console.error("There was an error creating the user!",c),alert("Error creating user")}};return e.jsxs(xe,{children:[e.jsx(U,{children:e.jsxs(q,{direction:"row",spacing:2,mt:3,mb:3,justifyContent:"center",alignItems:"center",children:[e.jsxs(w,{value:"",displayEmpty:!0,children:[e.jsx(f,{value:"",disabled:!0,children:"Select Customer Name"}),p.map(t=>e.jsx(f,{value:t.firstName,children:t.firstName},t._id))]}),e.jsxs(w,{value:"",displayEmpty:!0,children:[e.jsx(f,{value:"",disabled:!0,children:"Select Customer Code"}),p.map(t=>e.jsx(f,{value:t.client_code,children:t.client_code},t._id))]}),e.jsxs(w,{value:"",displayEmpty:!0,children:[e.jsx(f,{value:"",disabled:!0,children:"Select Customer Phone"}),p.map(t=>e.jsx(f,{value:t.phone,children:t.phone},t._id))]}),e.jsx(N,{variant:"contained",color:"primary",startIcon:e.jsx(b,{icon:"eva:download-fill"}),children:"Download Data"})]})}),e.jsxs(q,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:5,mb:5,children:[e.jsx(T,{variant:"h4",children:"Customer"}),e.jsx(N,{variant:"contained",color:"inherit",startIcon:e.jsx(b,{icon:"eva:plus-fill"}),onClick:Q,children:"Add New Customer"})]}),e.jsxs(U,{children:[e.jsx(H,{numSelected:r.length,filterName:o,onFilterName:se}),e.jsx(pe,{children:e.jsx(ge,{sx:{overflow:"unset"},children:e.jsxs(je,{sx:{minWidth:800},children:[e.jsx($,{order:s,orderBy:j,rowCount:p.length,numSelected:r.length,onRequestSort:X,onSelectAllClick:Z,headLabel:[{id:"client_code",label:"Client Code"},{id:"name",label:"Name",align:"center"},{id:"phone",label:"Phone"},{id:"email",label:"Email"},{id:"address",label:"Address"},{id:""}]}),e.jsxs(fe,{children:[k.slice(n*u,n*u+u).map(t=>e.jsx(D,{client_code:t.client_code,name:`${t.firstName} ${t.surname}`,phone:t.phone,email:t.email,address:t.address,selected:r.indexOf(t.firstName)!==-1,onClick:i=>ee(i,t.firstName)},t._id)),e.jsx(z,{height:u-k.slice(n*u,n*u+u).length}),re&&e.jsx(B,{colSpan:6})]})]})})}),e.jsx(be,{rowsPerPageOptions:[5,10,25],component:"div",count:V,rowsPerPage:u,page:n,onPageChange:ne,onRowsPerPageChange:te})]}),e.jsx(ve,{open:G,onClose:L,children:e.jsxs(_,{sx:{p:3,width:400,mx:"auto",mt:10,bgcolor:"background.paper"},children:[e.jsx(T,{variant:"h6",gutterBottom:!0,children:"Add New Customer"}),e.jsxs("form",{onSubmit:ae,children:[e.jsx(S,{label:"First Name",name:"firstName",fullWidth:!0,margin:"normal",onChange:C}),e.jsx(S,{label:"Surname",name:"surname",fullWidth:!0,margin:"normal",onChange:C}),e.jsx(S,{label:"Phone",name:"phone",fullWidth:!0,margin:"normal",onChange:C}),e.jsx(S,{label:"Email",name:"email",fullWidth:!0,margin:"normal",onChange:C}),e.jsx(S,{label:"Address",name:"address",fullWidth:!0,margin:"normal",onChange:C}),e.jsxs(w,{name:"userType",value:F.userType,onChange:C,fullWidth:!0,margin:"normal",children:[e.jsx(f,{value:"RECEIVABLE",children:"RECEIVABLE"}),e.jsx(f,{value:"PAYABLE",children:"PAYABLE"})]}),e.jsx(N,{type:"submit",variant:"contained",color:"primary",children:"Submit"})]})]})})]})}function Ne(){return e.jsxs(e.Fragment,{children:[e.jsx(Ce,{children:e.jsx("title",{children:" User  "})}),e.jsx(Pe,{})]})}export{Ne as default};
