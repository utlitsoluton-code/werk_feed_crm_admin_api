import{r as a,j as e,C as E,S as C,T as K,B as r,I as q,a as H,b as l,c as U,d as V,e as _,f as G,g as m,h as n,i as g,k as J,l as Q,D as P,m as S,n as v,o as A,p as X,M as D,q as Y,W as Z}from"./index-c030b7df.js";const ee=({inputData:c,filterName:d})=>c.filter(i=>i.summery.toLowerCase().includes(d.toLowerCase()));function te(){const[c,d]=a.useState(0),[i,k]=a.useState("asc"),[s,T]=a.useState("date"),[p,I]=a.useState(""),[u,w]=a.useState(5),[f,W]=a.useState([]),[F,y]=a.useState(!0),[O,h]=a.useState(!1),[B,x]=a.useState(!1),N=()=>localStorage.getItem("authKey");a.useEffect(()=>{(async()=>{try{const o=await Y.get("http://65.1.233.188:9000/api/v1/admin/transaction/get-all-credit",{headers:{authKey:`${N()}`}});W(o.data.data),y(!1)}catch(o){console.error("Error fetching data:",o),y(!1)}})()},[]);const j=t=>{k(s===t&&i==="asc"?"desc":"asc"),T(t)},R=(t,o)=>{d(o)},L=t=>{d(0),w(parseInt(t.target.value,10))},M=t=>{I(t.target.value)},$=()=>{console.log("Printing receipt...")},b=ee({inputData:f,filterName:p}),z=!b.length&&!!p;return e.jsxs(E,{children:[e.jsxs(C,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:5,mb:5,children:[e.jsx(K,{variant:"h4",children:"Customer Credits"}),e.jsx(r,{variant:"contained",color:"inherit",startIcon:e.jsx(q,{icon:"eva:plus-fill"}),children:"Add New Credit"})]}),e.jsxs(H,{children:[e.jsx(C,{direction:"row",alignItems:"center",justifyContent:"space-between",p:2,children:e.jsx(l,{variant:"outlined",value:p,onChange:M,placeholder:"Search by summary"})}),e.jsx(U,{children:e.jsx(V,{sx:{overflow:"unset",p:2},children:e.jsxs(_,{sx:{minWidth:800},children:[e.jsx(G,{children:e.jsxs(m,{children:[e.jsx(n,{children:"Name"}),e.jsx(n,{children:"Phone"}),e.jsx(n,{children:e.jsx(g,{active:s==="productCount",direction:s==="productCount"?i:"asc",onClick:()=>j("productCount"),children:"Product Count"})}),e.jsx(n,{children:e.jsx(g,{active:s==="dueAmount",direction:s==="dueAmount"?i:"asc",onClick:()=>j("dueAmount"),children:"Due Amount"})}),e.jsx(n,{children:e.jsx(g,{active:s==="totalAmount",direction:s==="totalAmount"?i:"asc",onClick:()=>j("totalAmount"),children:"Total Amount"})}),e.jsx(n,{children:"Summary"}),e.jsx(n,{children:e.jsx(g,{active:s==="createdAt",direction:s==="createdAt"?i:"asc",onClick:()=>j("createdAt"),children:"Date"})}),e.jsx(n,{})]})}),e.jsxs(J,{children:[F?e.jsx(m,{children:e.jsx(n,{colSpan:8,align:"center",children:"Loading..."})}):b.slice(c*u,c*u+u).map(t=>e.jsxs(m,{children:[e.jsx(n,{children:`${`${t.userId.firstName} ${t.userId.surname}`}`}),e.jsx(n,{children:t.userId.phone}),e.jsx(n,{children:t.productDetails.length}),e.jsx(n,{children:t.dueAmount}),e.jsx(n,{children:t.Toatalmount}),e.jsx(n,{children:t.summery}),e.jsx(n,{children:new Date(t.updatedAt).toLocaleDateString()}),e.jsx(n,{})]},t._id)),z&&e.jsx(m,{children:e.jsx(n,{colSpan:8,align:"center",children:"No data found"})})]})]})})}),e.jsxs(C,{direction:"row",spacing:2,justifyContent:"left",p:2,mt:2,children:[e.jsx(r,{variant:"contained",color:"success",size:"large",onClick:()=>x(!0),children:"Credit"}),e.jsx(r,{variant:"contained",color:"error",size:"large",onClick:()=>h(!0),children:"Pay"}),e.jsx(r,{variant:"contained",color:"primary",size:"large",onClick:$,children:"Print"}),e.jsx(r,{variant:"contained",color:"inherit",size:"large",onClick:()=>window.history.back(),children:"Back"})]}),e.jsx(Q,{page:c,component:"div",count:f.length,rowsPerPage:u,onPageChange:R,rowsPerPageOptions:[5,10,25],onRowsPerPageChange:L})]}),e.jsxs(P,{open:B,onClose:()=>x(!1),children:[e.jsx(S,{children:"Credit Details"}),e.jsxs(v,{children:[e.jsx(l,{margin:"dense",label:"Select User",fullWidth:!0}),e.jsx(l,{margin:"dense",label:"Add Product",fullWidth:!0}),e.jsx(l,{margin:"dense",label:"Amount",type:"number",fullWidth:!0}),e.jsx(l,{margin:"dense",label:"Comment",fullWidth:!0})]}),e.jsxs(A,{children:[e.jsx(r,{onClick:()=>x(!1),color:"primary",children:"Cancel"}),e.jsx(r,{onClick:()=>x(!1),color:"primary",children:"Submit"})]})]}),e.jsxs(P,{open:O,onClose:()=>h(!1),children:[e.jsx(S,{children:"Payment Details"}),e.jsxs(v,{children:[e.jsx(l,{autoFocus:!0,margin:"dense",label:"Date",type:"date",fullWidth:!0,value:new Date().toISOString().split("T")[0],InputProps:{readOnly:!0}}),e.jsx(l,{margin:"dense",label:"Amount",type:"number",fullWidth:!0,value:0,InputProps:{readOnly:!0}}),e.jsxs(X,{margin:"dense",fullWidth:!0,label:"Type",defaultValue:"",children:[e.jsx(D,{value:"payment",children:"Payment"}),e.jsx(D,{value:"refund",children:"Refund"})]}),e.jsx(l,{margin:"dense",label:"Payment",fullWidth:!0}),e.jsx(l,{margin:"dense",label:"Comment",fullWidth:!0})]}),e.jsxs(A,{children:[e.jsx(r,{onClick:()=>h(!1),color:"primary",children:"Cancel"}),e.jsx(r,{onClick:()=>h(!1),color:"primary",children:"Submit"})]})]})]})}function ae(){return e.jsxs(e.Fragment,{children:[e.jsx(Z,{children:e.jsx("title",{children:" Customer Credit "})}),e.jsx(te,{})]})}export{ae as default};
