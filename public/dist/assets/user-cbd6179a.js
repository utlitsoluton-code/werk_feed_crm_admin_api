import{j as e,g as R,h as u,a4 as ae,T as w,P as a,r as d,ad as ie,a2 as P,ae as L,af as oe,M as k,I as g,f as le,i as ce,K as I,ag as de,ah as he,ac as ue,ai as U,C as xe,S as me,a as O,B as E,c as pe,d as ge,e as je,k as fe,l as be,aj as Ce,b as S,p as ve,q as W,W as ye}from"./index-9310a519.js";import{C as V}from"./Checkbox-7de39b41.js";function M({query:n}){return e.jsx(R,{children:e.jsx(u,{align:"center",colSpan:6,sx:{py:3},children:e.jsxs(ae,{sx:{textAlign:"center"},children:[e.jsx(w,{variant:"h6",paragraph:!0,children:"Not found"}),e.jsxs(w,{variant:"body2",children:["No results found for Â ",e.jsxs("strong",{children:['"',n,'"']}),".",e.jsx("br",{})," Try checking for typos or using complete words."]})]})})})}M.propTypes={query:a.string};function K({selected:n,name:t,client_code:s,email:c,phone:o,address:x,handleClick:m,suctomerId:j}){const[i,C]=d.useState(null),h=ie(),v=()=>{C(null)},y=()=>{h(`/user-credit/?suctomerId=${j}`)},T=()=>{h(`/credit/?suctomerId=${j}`)};return e.jsxs(e.Fragment,{children:[e.jsxs(R,{hover:!0,tabIndex:-1,role:"checkbox",selected:n,children:[e.jsx(u,{padding:"checkbox",children:e.jsx(V,{disableRipple:!0,checked:n,onChange:m})}),e.jsx(u,{children:s}),e.jsx(u,{children:t}),e.jsx(u,{children:o}),e.jsx(u,{children:c}),e.jsx(u,{children:x}),e.jsx(u,{children:e.jsx(P,{onClick:y,children:e.jsx(L,{})})}),e.jsx(u,{children:e.jsx(P,{onClick:T,children:e.jsx(L,{})})})]}),e.jsxs(oe,{open:!!i,anchorEl:i,onClose:v,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{sx:{width:140}},children:[e.jsxs(k,{onClick:v,children:[e.jsx(g,{icon:"eva:edit-fill",sx:{mr:2}}),"Edit"]}),e.jsxs(k,{onClick:v,sx:{color:"error.main"},children:[e.jsx(g,{icon:"eva:trash-2-outline",sx:{mr:2}}),"Delete"]})]})]})}K.propTypes={name:a.string.isRequired,client_code:a.string.isRequired,email:a.string.isRequired,address:a.string.isRequired,phone:a.string.isRequired,selected:a.bool.isRequired,handleClick:a.func.isRequired,suctomerId:a.func.isRequired};const Se={border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"};function D(n,t,s){return n[s]===null?1:t[s]===null||t[s]<n[s]?-1:t[s]>n[s]?1:0}function we(n,t){return n==="desc"?(s,c)=>D(s,c,t):(s,c)=>-D(s,c,t)}function Te({inputData:n,comparator:t,filterName:s}){const c=n.map((o,x)=>[o,x]);return c.sort((o,x)=>{const m=t(o[0],x[0]);return m!==0?m:o[1]-x[1]}),n=c.map(o=>o[0]),s&&(n=n.filter(o=>o.name.toLowerCase().indexOf(s.toLowerCase())!==-1)),n}function _({order:n,orderBy:t,rowCount:s,headLabel:c,numSelected:o,onRequestSort:x,onSelectAllClick:m}){const j=i=>C=>{x(C,i)};return e.jsx(le,{children:e.jsxs(R,{children:[e.jsx(u,{padding:"checkbox",children:e.jsx(V,{indeterminate:o>0&&o<s,checked:s>0&&o===s,onChange:m})}),c.map(i=>e.jsx(u,{align:i.align||"left",sortDirection:t===i.id?n:!1,sx:{width:i.width,minWidth:i.minWidth},children:e.jsxs(ce,{hideSortIcon:!0,active:t===i.id,direction:t===i.id?n:"asc",onClick:j(i.id),children:[i.label,t===i.id?e.jsx(I,{sx:{...Se},children:n==="desc"?"sorted descending":"sorted ascending"}):null]})},i.id))]})})}_.propTypes={order:a.oneOf(["asc","desc"]),orderBy:a.string,rowCount:a.number,headLabel:a.array,numSelected:a.number,onRequestSort:a.func,onSelectAllClick:a.func};function $({emptyRows:n,height:t}){return n?e.jsx(R,{sx:{...t&&{height:t*n}},children:e.jsx(u,{colSpan:9})}):null}$.propTypes={emptyRows:a.number,height:a.number};function B({numSelected:n,filterName:t,onFilterName:s}){return e.jsxs(de,{sx:{height:96,display:"flex",justifyContent:"space-between",p:c=>c.spacing(0,1,0,3),...n>0&&{color:"primary.main",bgcolor:"primary.lighter"}},children:[n>0?e.jsxs(w,{component:"div",variant:"subtitle1",children:[n," selected"]}):e.jsx(he,{value:t,onChange:s,placeholder:"Search user...",startAdornment:e.jsx(ue,{position:"start",children:e.jsx(g,{icon:"eva:search-fill",sx:{color:"text.disabled",width:20,height:20}})})}),n>0?e.jsx(U,{title:"Delete",children:e.jsx(P,{children:e.jsx(g,{icon:"eva:trash-2-fill"})})}):e.jsx(U,{title:"Filter list",children:e.jsx(P,{children:e.jsx(g,{icon:"ic:round-filter-list"})})})]})}B.propTypes={numSelected:a.number,filterName:a.string,onFilterName:a.func};function Pe(){const[n,t]=d.useState(0),[s,c]=d.useState("asc"),[o,x]=d.useState([]),[m,j]=d.useState("name"),[i,C]=d.useState(""),[h,v]=d.useState(5),[y,T]=d.useState([]),[z,H]=d.useState(0),[Y,N]=d.useState(!1),[F,G]=d.useState({firstName:"",surname:"",phone:"",email:"",address:"",userType:"RECEIVABLE"});d.useEffect(()=>{(async()=>{try{const l=localStorage.getItem("authKey"),p=await W.get("http://65.1.233.188:9000/api/v1/admin/user/get-all-customer",{headers:{authKey:`${l}`}}),{data:b}=p.data;T(b),H(p.data.totalLength)}catch(l){console.error("There was an error fetching the users!",l)}})()},[n,h]);const J=()=>{N(!0)},q=()=>{N(!1)},Q=(r,l)=>{l!==""&&(c(m===l&&s==="asc"?"desc":"asc"),j(l))},X=r=>{if(r.target.checked){const l=y.map(p=>p.firstName);x(l);return}x([])},Z=(r,l)=>{t(l)},ee=r=>{t(0),v(parseInt(r.target.value,10))},ne=r=>{t(0),C(r.target.value)},A=Te({inputData:y,comparator:we(s,m),filterName:i}),se=!A.length&&!!i,f=r=>{const{name:l,value:p}=r.target;G(b=>({...b,[l]:p}))},te=async r=>{r.preventDefault();const l=localStorage.getItem("authKey");try{const b=(await W.post("http://65.1.233.188:9000/api/v1/admin/user/create-customer",F,{headers:{authKey:`${l}`}})).data.data;console.log({newUser:b}),T(re=>[...re,b]),q()}catch(p){console.error("There was an error creating the user!",p),alert("Error creating user")}};return d.useState(null),e.jsxs(xe,{children:[e.jsxs(me,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:5,mb:5,children:[e.jsx(w,{variant:"h4",children:"Customer"}),e.jsxs(O,{children:[e.jsx(E,{variant:"contained",color:"inherit",startIcon:e.jsx(g,{icon:"eva:plus-fill"}),onClick:J,children:"Add New Customer"}),e.jsx(E,{variant:"contained",color:"primary",sx:{marginLeft:5},startIcon:e.jsx(g,{icon:"eva:download-fill"}),onClick:()=>alert("Coming Soon !"),children:"Download Data"})]})]}),e.jsxs(O,{children:[e.jsx(B,{numSelected:o.length,filterName:i,onFilterName:ne}),e.jsx(pe,{children:e.jsx(ge,{sx:{overflow:"unset",p:2},children:e.jsxs(je,{sx:{minWidth:800},children:[e.jsx(_,{order:s,orderBy:m,rowCount:y.length,numSelected:o.length,onRequestSort:Q,onSelectAllClick:X,headLabel:[{id:"client_code",label:"Client Code"},{id:"name",label:"Name",align:"center"},{id:"phone",label:"Phone"},{id:"email",label:"Email"},{id:"address",label:"Address"},{id:"View Details",label:"View Details"},{id:"View Credit",label:"View Credit"}]}),e.jsxs(fe,{children:[A.slice(n*h,n*h+h).map(r=>e.jsx(K,{client_code:r.client_code,name:`${r.firstName} ${r.surname}`,phone:r.phone,email:r.email,address:r.address,suctomerId:r._id},r._id)),e.jsx($,{height:h-A.slice(n*h,n*h+h).length}),se&&e.jsx(M,{colSpan:6})]})]})})}),e.jsx(be,{rowsPerPageOptions:[5,10,25],component:"div",count:z,rowsPerPage:h,page:n,onPageChange:Z,onRowsPerPageChange:ee})]}),e.jsx(Ce,{open:Y,onClose:q,children:e.jsxs(I,{sx:{p:3,width:400,mx:"auto",mt:10,mb:10,bgcolor:"background.paper"},children:[e.jsx(w,{variant:"h6",gutterBottom:!0,children:"Add New Customer"}),e.jsxs("form",{onSubmit:te,children:[e.jsx(S,{label:"First Name",name:"firstName",fullWidth:!0,margin:"normal",onChange:f}),e.jsx(S,{label:"Surname",name:"surname",fullWidth:!0,margin:"normal",onChange:f}),e.jsx(S,{label:"Phone",name:"phone",fullWidth:!0,margin:"normal",onChange:f}),e.jsx(S,{label:"Email",name:"email",fullWidth:!0,margin:"normal",onChange:f}),e.jsx(S,{label:"Address",name:"address",fullWidth:!0,margin:"normal",onChange:f}),e.jsxs(ve,{name:"userType",value:F.userType,onChange:f,fullWidth:!0,margin:"normal",children:[e.jsx(k,{value:"RECEIVABLE",children:"RECEIVABLE"}),e.jsx(k,{value:"PAYABLE",children:"PAYABLE"})]}),e.jsx(I,{sx:{display:"flex",justifyContent:"center",mt:2},children:e.jsx(E,{type:"submit",variant:"contained",color:"primary",children:"Add Customer"})})]})]})})]})}function Ae(){return e.jsxs(e.Fragment,{children:[e.jsx(ye,{children:e.jsx("title",{children:" User  "})}),e.jsx(Pe,{})]})}export{Ae as default};
